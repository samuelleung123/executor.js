{
  "version": 3,
  "sources": ["../src/utils.js", "../src/execute_once.js", "../src/execute_forever.js", "../src/execute_times.js"],
  "sourcesContent": ["\r\nfunction async_timeout(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n}\r\n\r\n\r\nexport {\r\n    async_timeout\r\n}", "import {async_timeout} from \"./utils.js\";\r\n\r\nconst executor_map = new Map();\r\nconst executor_result_map = new Map();\r\nconst executor_counter = new Map();\r\n\r\n\r\nconst execute_once = async function (key, cb) {\r\n    increase(key);\r\n    if (!executor_map.has(key)) {\r\n        executor_result_map.delete(key);\r\n        executor_map.set(key, cb);\r\n        await async_timeout();\r\n        let result = await cb();\r\n        executor_result_map.set(key, result);\r\n    }\r\n\r\n    while (true) {\r\n        if (executor_result_map.has(key)) {\r\n            let result = executor_result_map.get(key);\r\n            decrease(key);\r\n            return result;\r\n        }\r\n        await async_timeout();\r\n    }\r\n}\r\n\r\nconst increase = function (key) {\r\n    let counter = executor_counter.get(key) || 0;\r\n    counter++;\r\n    executor_counter.set(key, Math.max(0, counter));\r\n}\r\nconst decrease = function (key) {\r\n    let counter = executor_counter.get(key) || 0;\r\n    counter--;\r\n    executor_counter.set(key, Math.max(0, counter));\r\n    if (counter === 0) {\r\n        executor_result_map.delete(key);\r\n        executor_map.delete(key)\r\n    }\r\n}\r\n\r\nexport {\r\n    execute_once,\r\n}", "import {async_timeout} from \"./utils.js\";\r\n\r\nconst execute_forever = async function (cb) {\r\n    let will_break = false;\r\n    let breaker = () => {\r\n        will_break = true;\r\n    }\r\n\r\n    while (true) {\r\n        let result = await cb(breaker);\r\n        if (result !== undefined) {\r\n            return result;\r\n        }\r\n        if(will_break) {\r\n            break;\r\n        }\r\n        await async_timeout();\r\n    }\r\n}\r\n\r\nexport {\r\n    execute_forever,\r\n}", "import {async_timeout} from \"./utils.js\";\r\n\r\nconst execute_times = async function (times, cb, async = true) {\r\n    let result = [];\r\n    for (let i = 0; i < times; i++) {\r\n        result.push(await cb(i));\r\n        if (async) {\r\n            await async_timeout();\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport {\r\n    execute_times,\r\n}"],
  "mappings": "+EACA,WAAuB,EAAI,CACvB,MAAO,IAAI,SAAQ,GAAW,WAAW,EAAS,IAD7C,qBCCT,GAAM,GAAe,GAAI,KACnB,EAAsB,GAAI,KAC1B,EAAmB,GAAI,KAGvB,EAAe,iBAAgB,EAAK,EAAI,CAE1C,GADA,EAAS,GACL,CAAC,EAAa,IAAI,GAAM,CACxB,EAAoB,OAAO,GAC3B,EAAa,IAAI,EAAK,GACtB,KAAM,KACN,GAAI,GAAS,KAAM,KACnB,EAAoB,IAAI,EAAK,GAGjC,OAAa,CACT,GAAI,EAAoB,IAAI,GAAM,CAC9B,GAAI,GAAS,EAAoB,IAAI,GACrC,SAAS,GACF,EAEX,KAAM,OAhBO,gBAoBf,EAAW,WAAU,EAAK,CAC5B,GAAI,GAAU,EAAiB,IAAI,IAAQ,EAC3C,IACA,EAAiB,IAAI,EAAK,KAAK,IAAI,EAAG,KAHzB,YAKX,EAAW,WAAU,EAAK,CAC5B,GAAI,GAAU,EAAiB,IAAI,IAAQ,EAC3C,IACA,EAAiB,IAAI,EAAK,KAAK,IAAI,EAAG,IAClC,IAAY,GACZ,GAAoB,OAAO,GAC3B,EAAa,OAAO,KANX,YC9BjB,GAAM,GAAkB,iBAAgB,EAAI,CACxC,GAAI,GAAa,GACb,EAAU,MAAM,CAChB,EAAa,IADH,WAId,OAAa,CACT,GAAI,GAAS,KAAM,GAAG,GACtB,GAAI,IAAW,OACX,MAAO,GAEX,GAAG,EACC,MAEJ,KAAM,OAdU,mBCAxB,GAAM,GAAgB,iBAAgB,EAAO,EAAI,EAAQ,GAAM,CAC3D,GAAI,GAAS,GACb,OAAS,GAAI,EAAG,EAAI,EAAO,IACvB,EAAO,KAAK,KAAM,GAAG,IACjB,GACA,KAAM,KAId,MAAO,IATW",
  "names": []
}
